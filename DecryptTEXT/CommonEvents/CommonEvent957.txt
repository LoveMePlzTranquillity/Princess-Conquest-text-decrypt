CommonEvent 957
Name = "Bomber!"

  ShowAnimation([-1, 344, false])
  Script(["@w = 0"])
  Script(["@i = 0"])
  Script(["@beep = [120,120,90,90,60,60,30,30,30,30,15,15,15,15,15,15]"])
  Loop([])
    Wait([15])
    Comment(["check dist"])
    Script([" @trigger = 0"])
    ScriptMore(["@id = 1"])
    ScriptMore(["while @id <= 250"])
    ScriptMore(["if $game_map.events[@id]"])
    ScriptMore(["@distX = ($game_map.events[@id].x - $game_player.x).abs"])
    ScriptMore(["@distY = ($game_map.events[@id].y - $game_player.y).abs"])
    ScriptMore(["if @distX < 1.5 && @distY < 1.5"])
    ScriptMore(["@hpEnemy = $game_map.events[@id].enemy.hp rescue -1"])
    ScriptMore(["@mpEnemy = $game_map.events[@id].enemy.mp rescue 666"])
    ScriptMore(["if @hpEnemy != -1 && @mpEnemy != 666"])
    ScriptMore([" @trigger = 1"])
    ScriptMore([" break"])
    ScriptMore(["end"])
    ScriptMore(["end"])
    ScriptMore(["end"])
    ScriptMore(["@id += 1"])
    ScriptMore(["end"])
    ConditionalBranch([0, 739, 1])
      ControlSwitches([787, 787, 1])
      ControlSwitches([786, 786, 1])
      Empty([])

    BranchEnd([])
    ConditionalBranch([12, "$game_variables[116] != \"Bomber\""])
      ControlSwitches([787, 787, 1])
      ControlSwitches([786, 786, 1])
      Empty([])

    BranchEnd([])
    ConditionalBranch([12, "@trigger == 1"])
      BreakLoop([])
      Empty([])

    BranchEnd([])
    Script(["@w += 15"])
    ConditionalBranch([12, "@w == @beep[@i]"])
      ShowAnimation([-1, 344, false])
      Script(["@w = 0"])
      Script(["@i += 1"])
      ConditionalBranch([12, "@i >= @beep.length"])
        BreakLoop([])
        Empty([])

      BranchEnd([])
      Empty([])

    BranchEnd([])
    Empty([])

  RepeatAbove([])
  ShowAnimation([-1, 345, false])
  Script(["@dmg = $game_party.members[0].mhp"])
  ScriptMore(["@dmg -= ($game_party.members[0].mhp/1.33).round()"])
  ScriptMore(["while $game_party.leader.hp - @dmg < 1"])
  ScriptMore([" @dmg -= 1"])
  ScriptMore(["end"])
  Script(["@id = 1"])
  ScriptMore(["while @id <= 250"])
  ScriptMore(["if $game_map.events[@id]"])
  ScriptMore(["@distX = ($game_map.events[@id].x - $game_player.x).abs"])
  ScriptMore(["@distY = ($game_map.events[@id].y - $game_player.y).abs"])
  ScriptMore(["if @distX < 4 && @distY < 4"])
  ScriptMore(["@hpEnemy = $game_map.events[@id].enemy.hp rescue -1"])
  ScriptMore(["@mpEnemy = $game_map.events[@id].enemy.mp rescue 666"])
  ScriptMore(["if @hpEnemy != -1 && @mpEnemy != 666"])
  ScriptMore(["@val = @dmg * @dmg * (@dmg/2) * ((80+rand(40))/100)"])
  ScriptMore(["$game_variables[1495] = \"Mech\""])
  ScriptMore(["$game_map.events[@id].damage_enemy(@val)"])
  ScriptMore(["end"])
  ScriptMore(["end"])
  ScriptMore(["end"])
  ScriptMore(["@id += 1"])
  ScriptMore(["end"])
  Script(["$game_party.leader.hp -= @dmg"])
  ScriptMore(["@dmg1 = @dmg"])
  ScriptMore(["@dmg2 = @dmg"])
  ScriptMore(["@dmg3 = @dmg"])
  ScriptMore(["if $game_party.members[1]"])
  ScriptMore(["while $game_party.members[1].hp - @dmg1 < 1"])
  ScriptMore([" @dmg1 -= 1"])
  ScriptMore(["end"])
  ScriptMore(["$game_party.members[1].hp -= @dmg1"])
  ScriptMore(["end"])
  ScriptMore(["if $game_party.members[2]"])
  ScriptMore(["while $game_party.members[2].hp - @dmg2 < 1"])
  ScriptMore([" @dmg2 -= 1"])
  ScriptMore(["end"])
  ScriptMore(["$game_party.members[2].hp -= @dmg2"])
  ScriptMore(["end"])
  ScriptMore(["if $game_party.members[3]"])
  ScriptMore(["while $game_party.members[3].hp - @dmg3 < 1"])
  ScriptMore([" @dmg3 -= 1"])
  ScriptMore(["end"])
  ScriptMore(["$game_party.members[3].hp -= @dmg3"])
  ScriptMore(["end"])
  ScriptMore(["message = @dmg.to_s"])
  ScriptMore(["$game_map.show_text($game_player,message)"])
  ScriptMore(["$game_map.sas_hud.refresh_bars"])
  ControlSwitches([787, 787, 1])
  CallCommonEvent([969])
  ConditionalBranch([12, "$game_party.leader.hp <= 1"])
    ControlSwitches([666, 666, 0])
    Empty([])

  BranchEnd([])
  ControlSwitches([786, 786, 1])
  Empty([])
