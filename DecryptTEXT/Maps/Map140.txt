Display Name = ""
Parallax Name = "Mermaid Rest"
Note = "<tile lock parallax>"

CommonEvent 1
Name = "Bubbles"

  Page 0
    Comment(["<always update>"])
    Label(["wmore"])
    Wait([430])
    Label(["again"])
    Script(["@px = $game_player.x"])
    ScriptMore(["@py = $game_player.y"])
    ControlVariables([2062, 2062, 0, 4, "@px - 3 + rand(6)"])
    ControlVariables([2063, 2063, 0, 4, "@py - 3 + rand(6)"])
    ConditionalBranch([12, "$game_variables[2062] >= 25 || $game_variables[2062] <= 0 || $game_variables[2063] >= 20 || $game_variables[2063] <= 0"])
      Wait([20])
      JumpToLabel(["again"])
      Empty([])

    BranchEnd([])
    Comment(["Not on player"])
    GetLocationInfo([2949, 5, 1, 2062, 2063])
    ConditionalBranch([12, "$game_variables[2949] == 2"])
      ConditionalBranch([12, "$game_map.passable?($game_variables[2062], $game_variables[2063], 2)"])
        Script(["@x = $game_variables[2062]"])
        ScriptMore(["@y = $game_variables[2063]"])
        Script(["$game_map.events[@event_id].moveto(@x,@y)"])
        Wait([45])
        JumpToLabel(["wmore"])
        Empty([])
      BranchEnd([])
      Empty([])

    Else([])
      Wait([20])
      JumpToLabel(["again"])
      Empty([])

    BranchEnd([])
    Empty([])

CommonEvent 2
Name = "Bubbles"

  Page 0
    Comment(["<always update>"])
    Label(["wmore"])
    Wait([350])
    Label(["again"])
    Script(["@px = $game_player.x"])
    ScriptMore(["@py = $game_player.y"])
    ControlVariables([2062, 2062, 0, 4, "@px - 3 + rand(6)"])
    ControlVariables([2063, 2063, 0, 4, "@py - 3 + rand(6)"])
    ConditionalBranch([12, "$game_variables[2062] >= 25 || $game_variables[2062] <= 0 || $game_variables[2063] >= 20 || $game_variables[2063] <= 0"])
      Wait([20])
      JumpToLabel(["again"])
      Empty([])

    BranchEnd([])
    Comment(["Not on player"])
    GetLocationInfo([2949, 5, 1, 2062, 2063])
    ConditionalBranch([12, "$game_variables[2949] == 2"])
      ConditionalBranch([12, "$game_map.passable?($game_variables[2062], $game_variables[2063], 2)"])
        Script(["@x = $game_variables[2062]"])
        ScriptMore(["@y = $game_variables[2063]"])
        Script(["$game_map.events[@event_id].moveto(@x,@y)"])
        Wait([45])
        JumpToLabel(["wmore"])
        Empty([])
      BranchEnd([])
      Empty([])

    Else([])
      Wait([20])
      JumpToLabel(["again"])
      Empty([])

    BranchEnd([])
    Empty([])

CommonEvent 3
Name = "Bubbles"

  Page 0
    Comment(["<always update>"])
    Label(["wmore"])
    Wait([540])
    Label(["again"])
    Script(["@px = $game_player.x"])
    ScriptMore(["@py = $game_player.y"])
    ControlVariables([2062, 2062, 0, 4, "@px - 3 + rand(6)"])
    ControlVariables([2063, 2063, 0, 4, "@py - 3 + rand(6)"])
    ConditionalBranch([12, "$game_variables[2062] >= 25 || $game_variables[2062] <= 0 || $game_variables[2063] >= 20 || $game_variables[2063] <= 0"])
      Wait([20])
      JumpToLabel(["again"])
      Empty([])

    BranchEnd([])
    Comment(["Not on player"])
    GetLocationInfo([2949, 5, 1, 2062, 2063])
    ConditionalBranch([12, "$game_variables[2949] == 2"])
      ConditionalBranch([12, "$game_map.passable?($game_variables[2062], $game_variables[2063], 2)"])
        Script(["@x = $game_variables[2062]"])
        ScriptMore(["@y = $game_variables[2063]"])
        Script(["$game_map.events[@event_id].moveto(@x,@y)"])
        Wait([45])
        JumpToLabel(["wmore"])
        Empty([])
      BranchEnd([])
      Empty([])

    Else([])
      Wait([20])
      JumpToLabel(["again"])
      Empty([])

    BranchEnd([])
    Empty([])

CommonEvent 4
Name = "Kelp"

  Page 0
    Comment(["<always update>"])
    Comment(["[enemy 025]"])
    Comment(["[localsw 1]"])
    Empty([])

  Page 1
    Comment(["<always update>"])
    ConditionalBranch([12, "!$game_party.members[0].equips[0].nil?"])
      ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(1)"])
        Wait([15])
        ShowAnimation([0, 7, true])
        ControlSelfSwitch(["A", 0])
        Empty([])
      Else([])
        ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(2)"])
          Wait([15])
          ShowAnimation([0, 7, true])
          ControlSelfSwitch(["A", 0])
          Empty([])
        Else([])
          ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(4)"])
            Wait([15])
            ShowAnimation([0, 7, true])
            ControlSelfSwitch(["A", 0])
            Empty([])
          Else([])
            ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(5)"])
              Wait([15])
              ShowAnimation([0, 7, true])
              ControlSelfSwitch(["A", 0])
              Empty([])
            Else([])
              ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(7)"])
                Wait([15])
                ShowAnimation([0, 7, true])
                ControlSelfSwitch(["A", 0])
                Empty([])
              Else([])
                Wait([15])
                PlaySE(["RPG::SE(@name=\"Blow2\", @pitch=100, @volume=80)"])
                ShowAnimation([0, 140, true])
                ControlSelfSwitch(["B", 1])
                Empty([])
              BranchEnd([])
              Empty([])
            BranchEnd([])
            Empty([])
          BranchEnd([])
          Empty([])
        BranchEnd([])
        Empty([])
      BranchEnd([])
      Empty([])

    BranchEnd([])
    Empty([])

  Page 2
    Empty([])

  Page 3
    ControlSelfSwitch(["A", 1])
    ControlSelfSwitch(["B", 1])
    ControlSelfSwitch(["C", 1])
    ControlSelfSwitch(["D", 1])
    EraseEvent([])
    Empty([])

CommonEvent 5
Name = "Kelp"

  Page 0
    Comment(["<always update>"])
    Comment(["[enemy 025]"])
    Comment(["[localsw 1]"])
    Empty([])

  Page 1
    Comment(["<always update>"])
    ConditionalBranch([12, "!$game_party.members[0].equips[0].nil?"])
      ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(1)"])
        Wait([15])
        ShowAnimation([0, 7, true])
        ControlSelfSwitch(["A", 0])
        Empty([])
      Else([])
        ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(2)"])
          Wait([15])
          ShowAnimation([0, 7, true])
          ControlSelfSwitch(["A", 0])
          Empty([])
        Else([])
          ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(4)"])
            Wait([15])
            ShowAnimation([0, 7, true])
            ControlSelfSwitch(["A", 0])
            Empty([])
          Else([])
            ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(5)"])
              Wait([15])
              ShowAnimation([0, 7, true])
              ControlSelfSwitch(["A", 0])
              Empty([])
            Else([])
              ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(7)"])
                Wait([15])
                ShowAnimation([0, 7, true])
                ControlSelfSwitch(["A", 0])
                Empty([])
              Else([])
                Wait([15])
                PlaySE(["RPG::SE(@name=\"Blow2\", @pitch=100, @volume=80)"])
                ShowAnimation([0, 140, true])
                ControlSelfSwitch(["B", 1])
                Empty([])
              BranchEnd([])
              Empty([])
            BranchEnd([])
            Empty([])
          BranchEnd([])
          Empty([])
        BranchEnd([])
        Empty([])
      BranchEnd([])
      Empty([])

    BranchEnd([])
    Empty([])

  Page 2
    Empty([])

  Page 3
    ControlSelfSwitch(["A", 1])
    ControlSelfSwitch(["B", 1])
    ControlSelfSwitch(["C", 1])
    ControlSelfSwitch(["D", 1])
    EraseEvent([])
    Empty([])

CommonEvent 6
Name = "Kelp"

  Page 0
    Comment(["<always update>"])
    Comment(["[enemy 025]"])
    Comment(["[localsw 1]"])
    Empty([])

  Page 1
    Comment(["<always update>"])
    ConditionalBranch([12, "!$game_party.members[0].equips[0].nil?"])
      ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(1)"])
        Wait([15])
        ShowAnimation([0, 7, true])
        ControlSelfSwitch(["A", 0])
        Empty([])
      Else([])
        ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(2)"])
          Wait([15])
          ShowAnimation([0, 7, true])
          ControlSelfSwitch(["A", 0])
          Empty([])
        Else([])
          ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(4)"])
            Wait([15])
            ShowAnimation([0, 7, true])
            ControlSelfSwitch(["A", 0])
            Empty([])
          Else([])
            ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(5)"])
              Wait([15])
              ShowAnimation([0, 7, true])
              ControlSelfSwitch(["A", 0])
              Empty([])
            Else([])
              ConditionalBranch([12, "$game_party.members[0].wtype_equipped?(7)"])
                Wait([15])
                ShowAnimation([0, 7, true])
                ControlSelfSwitch(["A", 0])
                Empty([])
              Else([])
                Wait([15])
                PlaySE(["RPG::SE(@name=\"Blow2\", @pitch=100, @volume=80)"])
                ShowAnimation([0, 140, true])
                ControlSelfSwitch(["B", 1])
                Empty([])
              BranchEnd([])
              Empty([])
            BranchEnd([])
            Empty([])
          BranchEnd([])
          Empty([])
        BranchEnd([])
        Empty([])
      BranchEnd([])
      Empty([])

    BranchEnd([])
    Empty([])

  Page 2
    Empty([])

  Page 3
    ControlSelfSwitch(["A", 1])
    ControlSelfSwitch(["B", 1])
    ControlSelfSwitch(["C", 1])
    ControlSelfSwitch(["D", 1])
    EraseEvent([])
    Empty([])

CommonEvent 7
Name = "InnMer"

  Page 0
    Comment(["<always update>"])
    Empty([])

  Page 1
    Comment(["<always update>"])
    ControlSwitches([2412, 2412, 0])
    ControlVariables([2097, 2097, 0, 0, 5123])
    ControlVariables([2051, 2051, 0, 0, 5])
    ShowPicture([1, "RND", 0, 0, 0, 0, 100, 100, 255, 0])
    ShowTextAttributes(["", 0, 2, 2])
    ShowText(["Mermaid Innkeeper:"])
    ShowText(["Huh!?\\.\\. What kind o' fish are ya?"])
    ConditionalBranch([0, 4286, 0])
      ControlVariables([2051, 2051, 0, 0, 4])
      ShowPicture([1, "RND", 0, 0, 0, 0, 100, 100, 255, 0])
      ShowTextAttributes(["", 0, 2, 2])
      ShowText(["Mermaid Innkeeper:"])
      ShowText(["Oh!\\.\\. Th' tin head that got in th' throne room,\\. aye?"])
      ControlVariables([2051, 2051, 0, 0, 5])
      ShowPicture([1, "RND", 0, 0, 0, 0, 100, 100, 255, 0])
      ShowTextAttributes(["", 0, 2, 2])
      ShowText(["Mermaid Innkeeper:"])
      ShowText(["Orders are ye 'ave t' prove yer a friend o' us before mornin'.\\.\\. 'Tis better if ye keep yourself busy, aye?"])
      CallCommonEvent([559])
      ControlSwitches([2412, 2412, 1])
      JumpToLabel(["end"])
      Empty([])

    BranchEnd([])
    ControlVariables([2051, 2051, 0, 0, 4])
    ShowPicture([1, "RND", 0, 0, 0, 0, 100, 100, 255, 0])
    ShowTextAttributes(["", 0, 2, 2])
    ShowText(["Mermaid Innkeeper:"])
    ShowText(["Hmph,\\. whatever,\\. for th' Abyss!\\.\\. Anyone comin' back from a raid's welcom' in here!"])
    CallCommonEvent([559])
    ControlSwitches([2412, 2412, 1])
    ConditionalBranch([12, "$game_actors[1].state?(161) == true || $game_actors[1].state?(162) == true || $game_actors[1].state?(163) == true"])
      Comment(["Beast Knight - No Inns"])
      ShotBalloonIcon([-1, 6, true])
      ShowTextAttributes(["", 0, 0, 2])
      ShowText(["The \\c[18]Beast Knight\\c[0] Trait won't let you rest in Inns!"])
      JumpToLabel(["end"])
      Empty([])

    BranchEnd([])
    ControlVariables([1191, 1191, 0, 0, 6])
    CallCommonEvent([175])
    ShowTextAttributes(["", 0, 0, 1])
    ShowText(["Rest for \\v[1190] \\G?"])
    ShowChoices([["Yes", "No"], 2])
    When([0, "Yes"])
      ConditionalBranch([1, 584, 1, 1190, 1])
        ControlSwitches([2412, 2412, 0])
        ControlVariables([2097, 2097, 0, 0, 5123])
        ControlVariables([2051, 2051, 0, 0, 4])
        ShowPicture([1, "RND", 0, 0, 0, 0, 100, 100, 255, 0])
        ShowTextAttributes(["", 0, 2, 2])
        ShowText(["Mermaid Innkeeper:"])
        ShowText(["Keep an eye open!\\.\\. No tellin' wha' could happen if ye sleep too long~"])
        CallCommonEvent([559])
        ControlSwitches([2412, 2412, 1])
        Wait([15])
        FadeoutScreen([])
        Wait([15])
        CallCommonEvent([745])
        Wait([20])
        ConditionalBranch([1, 628, 0, 1010, 0])
          Comment(["Stranded ++"])
          Script(["s = $game_map.effect_surface"])
          ScriptMore(["s.change_color(60,0,0,80,0)"])
          Script(["l = $game_map.lantern"])
          ScriptMore(["l.hide"])
          ControlSwitches([3438, 3438, 1])
          ControlSwitches([1447, 1447, 1])
          CallCommonEvent([65])
          JumpToLabel(["end"])
          Empty([])
        BranchEnd([])
        TransferPlayer([0, 140, 12, 10, 2, 0])
        Script(["$game_map.sas_hud.refresh_bars"])
        ConditionalBranch([0, 412, 0])
          Script(["s = $game_map.effect_surface"])
          ScriptMore(["s.set_color(0,0,80)"])
          ScriptMore(["s.set_alpha(85)"])
          Empty([])
        Else([])
          Script(["s = $game_map.effect_surface"])
          ScriptMore(["s.set_color(0,0,80)"])
          ScriptMore(["s.set_alpha(125)"])
          Empty([])
        BranchEnd([])
        Wait([10])
        FadeinScreen([])
        JumpToLabel(["end"])
        Empty([])
      Else([])
        ShowTextAttributes(["", 0, 0, 2])
        ShowText(["You don't have enough \\G!"])
        JumpToLabel(["end"])
        Empty([])
      BranchEnd([])
      Empty([])

    When([1, "No"])
      Empty([])

    ChoicesEnd([])
    Label(["end"])
    Empty([])

  Page 2
    Empty([])

CommonEvent 8
Name = "EV008"

  Page 0
    TintScreen(["Tone(@red=0.0, @green=0.0, @blue=0.0, @gray=0.0)", 1, true])
    ConditionalBranch([12, "$game_switches[4286] == true || $game_switches[4287] == true"])
      Comment(["any festival"])
      Script(["s = $game_map.effect_surface"])
      ScriptMore(["s.set_color(0,0,80)"])
      ScriptMore(["s.set_alpha(85)"])
      Empty([])

    Else([])
      ConditionalBranch([0, 412, 0])
        Script(["s = $game_map.effect_surface"])
        ScriptMore(["s.set_color(0,0,80)"])
        ScriptMore(["s.set_alpha(85)"])
        Empty([])
      Else([])
        Script(["s = $game_map.effect_surface"])
        ScriptMore(["s.set_color(0,0,80)"])
        ScriptMore(["s.set_alpha(125)"])
        Empty([])
      BranchEnd([])
      Empty([])

    BranchEnd([])
    CallCommonEvent([81])
    ControlVariables([850, 850, 0, 0, 1])
    ControlVariables([848, 848, 0, 0, 1])
    ConditionalBranch([12, "$game_switches[4286] == true || $game_switches[4287] == true "])
      Comment(["calypso on"])
      Script(["$game_self_switches[[140,12,\"A\"]] = false"])
      Empty([])

    Else([])
      Comment(["calypso off"])
      Script(["$game_self_switches[[140,12,\"A\"]] = true"])
      Empty([])

    BranchEnd([])
    ConditionalBranch([12, "$game_self_switches[[438,24,\"A\"]] == true"])
      Comment(["ran from ika"])
      JumpToLabel(["close"])
      Empty([])

    BranchEnd([])
    ConditionalBranch([0, 4235, 0])
      JumpToLabel(["close"])
      Empty([])

    BranchEnd([])
    ConditionalBranch([0, 4285, 1])
      Label(["close"])
      Comment(["calypso off"])
      Script(["$game_self_switches[[140,12,\"A\"]] = true"])
      Comment(["inn off"])
      Script(["$game_self_switches[[140,7,\"A\"]] = true"])
      Empty([])

    Else([])
      Script(["$game_self_switches[[140,7,\"A\"]] = false"])
      Wait([5])
      ControlVariables([2100, 2100, 0, 0, 5123])
      CallCommonEvent([549])
      Empty([])

    BranchEnd([])
    Wait([15])
    FadeinScreen([])
    EraseEvent([])
    Empty([])

CommonEvent 9
Name = "EV009"

  Page 0
    PlaySE(["RPG::SE(@name=\"Move\", @pitch=100, @volume=80)"])
    FadeoutScreen([])
    Wait([15])
    FadeoutBGS([2])
    TransferPlayer([0, 97, 75, 1, 2, 0])
    Empty([])

CommonEvent 10
Name = "EV010"

  Page 0
    PlaySE(["RPG::SE(@name=\"Move\", @pitch=100, @volume=80)"])
    FadeoutScreen([])
    Wait([15])
    FadeoutBGS([2])
    TransferPlayer([0, 97, 75, 1, 2, 0])
    Empty([])

CommonEvent 11
Name = "EV011"

  Page 0
    PlaySE(["RPG::SE(@name=\"Move\", @pitch=100, @volume=80)"])
    FadeoutScreen([])
    Wait([15])
    FadeoutBGS([2])
    TransferPlayer([0, 97, 75, 1, 2, 0])
    Empty([])

CommonEvent 12
Name = "Calypso"

  Page 0
    Comment(["<always update>"])
    ShowPicture([1, "Calypso dial", 0, 0, 0, 0, 100, 100, 255, 0])
    ShowTextAttributes(["", 0, 2, 2])
    ShowText(["Calypso:"])
    ShowText(["Welcome!\\.\\. Don't celebrate a fine raid on an empty belly!\\.\\."])
    ShowPicture([1, "Calypso dial love", 0, 0, 0, 0, 100, 100, 255, 0])
    ShowTextAttributes(["", 0, 2, 2])
    ShowText(["Calypso:"])
    ShowText(["Thanks t' our leader,\\. tonight ye can feast wit' us!\\.\\. 'Ave a look!"])
    ErasePicture([1])
    Script(["$PU_AUTOMATIC_POPUP = false"])
    ChangeGold([1, 0, 99999])
    ChangeGold([0, 1, 584])
    Script(["$PU_AUTOMATIC_POPUP = true"])
    ControlVariables([617, 617, 0, 3, 7, 2, 0])
    ConditionalBranch([0, 4246, 0])
      ShopProcessing([0, 356, 0, 0, true])
      ShopItem([0, 354, 0, 0])
      Empty([])

    Else([])
      ShopProcessing([0, 356, 0, 0, true])
      Empty([])

    BranchEnd([])
    ControlVariables([618, 618, 0, 3, 7, 2, 0])
    ControlVariables([585, 585, 0, 1, 618])
    ControlVariables([585, 585, 2, 1, 617])
    ConditionalBranch([1, 585, 0, 0, 5])
      ControlSwitches([648, 648, 0])
      Wait([45])
      Empty([])

    BranchEnd([])
    CallCommonEvent([868])
    ShowPicture([1, "Calypso dial", 0, 0, 0, 0, 100, 100, 255, 0])
    ShowTextAttributes(["", 0, 2, 2])
    ShowText(["Calypso:"])
    ShowText(["See?\\.\\. What did I told ye,\\. lil' scamp?\\.\\. 'Tis the best ye can find 'round here!"])
    ErasePicture([1])
    Empty([])

  Page 1
    Empty([])

CommonEvent 13
Name = "light"

  Page 0
    Comment(["<always update>"])
    Comment(["[light 0]"])
    Empty([])

  Page 1
    Comment(["<always update>"])
    Comment(["[light 0]"])
    Empty([])
